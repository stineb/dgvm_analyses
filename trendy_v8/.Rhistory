left_join(read_csv("./startyear_trendy_v7_S1.csv"), by = "modl") %>%
rename(startyear_init = startyear, startyear_npp_init = startyear_npp) %>%
mutate(endyear_init = startyear_init + 9, endyear_npp_init = startyear_npp_init + 9) %>%
## create CDO command to convert flux (per seconds) to annual total (per year)
mutate(cmd_npp_units = paste("./get_tot_ann.sh", filn_npp, dir)) %>%
## create CDO command to take mean across years at simulation start and end
mutate(cmd_cVeg  = paste("./proc_trendy_soc_biomass.sh", filn_cVeg,  dir, startyear_init, endyear_init),
cmd_cSoil = paste("./proc_trendy_soc_biomass.sh", filn_cSoil, dir, startyear_init, endyear_init),
cmd_npp   = paste("./proc_trendy_soc_biomass.sh", filn_npp_ANN ,  dir, startyear_npp_init, endyear_npp_init),
cmd_cLeaf = paste("./proc_trendy_soc_biomass.sh", filn_cLeaf, dir, startyear_init, endyear_init),
cmd_cWood = paste("./proc_trendy_soc_biomass.sh", filn_cWood, dir, startyear_init, endyear_init),
cmd_cRoot = paste("./proc_trendy_soc_biomass.sh", filn_cRoot, dir, startyear_init, endyear_init),
cmd_dcSoil = paste("./proc_trendy_dsoc.sh", filn_cSoil, dir),
cmd_dcVeg  = paste("./proc_trendy_dsoc.sh", filn_cVeg,  dir),
cmd_dcLeaf  = paste("./proc_trendy_dsoc.sh", filn_cLeaf,  dir),
cmd_dcWood  = paste("./proc_trendy_dsoc.sh", filn_cWood,  dir)
) %>%
rowwise() %>%
mutate(filn_cVeg_init  = paste0(filn_cVeg, "_INIT_MEAN"),
filn_cVeg_final = paste0(filn_cVeg, "_FINAL_MEAN"),
filn_cLeaf_init  = paste0(filn_cLeaf, "_INIT_MEAN"),
filn_cLeaf_final = paste0(filn_cLeaf, "_FINAL_MEAN"),
filn_cRoot_init  = paste0(filn_cRoot, "_INIT_MEAN"),
filn_cRoot_final = paste0(filn_cRoot, "_FINAL_MEAN"),
filn_cWood_init  = paste0(filn_cWood, "_INIT_MEAN"),
filn_cWood_final = paste0(filn_cWood, "_FINAL_MEAN"),
filn_cSoil_init  = paste0(filn_cSoil, "_INIT_MEAN"),
filn_cSoil_final = paste0(filn_cSoil, "_FINAL_MEAN"),
filn_cSoil_change = paste0(filn_cSoil, "_CHANGE"),
filn_cVeg_change  = paste0(filn_cVeg, "_CHANGE"),
filn_cLeaf_change = paste0(filn_cLeaf, "_CHANGE"),
filn_cWood_change = paste0(filn_cWood, "_CHANGE"),
filn_npp_init  = paste0(filn_npp_ANN, "_INIT_MEAN"),
filn_npp_final = paste0(filn_npp_ANN, "_FINAL_MEAN")
)
df <- filnams %>%
## filter based on above
filter(modl %in% modls) %>%
# mutate(dir = paste0("/cluster/home/bestocke/data/trendy/v8/")) %>%
# mutate(dir = paste0("~/data/trendy/v8/")) %>%
mutate(dir = paste0("~/data/trendy/v7/")) %>%
mutate_at(vars(starts_with("filn")), ~str_replace(., ".nc", "")) %>%
## get starting year
left_join(read_csv("./startyear_trendy_v7_S1.csv"), by = "modl") %>%
rename(startyear_init = startyear, startyear_npp_init = startyear_npp) %>%
mutate(endyear_init = startyear_init + 9, endyear_npp_init = startyear_npp_init + 9) %>%
## create CDO command to convert flux (per seconds) to annual total (per year)
mutate(cmd_npp_units = paste("./get_tot_ann.sh", filn_npp, dir)) %>%
## create CDO command to take mean across years at simulation start and end
mutate(cmd_cVeg  = paste("./proc_trendy_soc_biomass.sh", filn_cVeg,  dir, startyear_init, endyear_init),
cmd_cSoil = paste("./proc_trendy_soc_biomass.sh", filn_cSoil, dir, startyear_init, endyear_init),
cmd_npp   = paste("./proc_trendy_soc_biomass.sh", filn_npp_ANN ,  dir, startyear_npp_init, endyear_npp_init),
cmd_cLeaf = paste("./proc_trendy_soc_biomass.sh", filn_cLeaf, dir, startyear_init, endyear_init),
cmd_cWood = paste("./proc_trendy_soc_biomass.sh", filn_cWood, dir, startyear_init, endyear_init),
cmd_cRoot = paste("./proc_trendy_soc_biomass.sh", filn_cRoot, dir, startyear_init, endyear_init),
cmd_dcSoil = paste("./proc_trendy_dsoc.sh", filn_cSoil, dir),
cmd_dcVeg  = paste("./proc_trendy_dsoc.sh", filn_cVeg,  dir),
cmd_dcLeaf  = paste("./proc_trendy_dsoc.sh", filn_cLeaf,  dir),
cmd_dcWood  = paste("./proc_trendy_dsoc.sh", filn_cWood,  dir)
) %>%
rowwise() %>%
mutate(filn_cVeg_init  = paste0(filn_cVeg, "_INIT_MEAN"),
filn_cVeg_final = paste0(filn_cVeg, "_FINAL_MEAN"),
filn_cLeaf_init  = paste0(filn_cLeaf, "_INIT_MEAN"),
filn_cLeaf_final = paste0(filn_cLeaf, "_FINAL_MEAN"),
filn_cRoot_init  = paste0(filn_cRoot, "_INIT_MEAN"),
filn_cRoot_final = paste0(filn_cRoot, "_FINAL_MEAN"),
filn_cWood_init  = paste0(filn_cWood, "_INIT_MEAN"),
filn_cWood_final = paste0(filn_cWood, "_FINAL_MEAN"),
filn_cSoil_init  = paste0(filn_cSoil, "_INIT_MEAN"),
filn_cSoil_final = paste0(filn_cSoil, "_FINAL_MEAN"),
filn_cSoil_change = paste0(filn_cSoil, "_CHANGE"),
filn_cVeg_change  = paste0(filn_cVeg, "_CHANGE"),
filn_cLeaf_change = paste0(filn_cLeaf, "_CHANGE"),
filn_cWood_change = paste0(filn_cWood, "_CHANGE"),
filn_npp_init  = paste0(filn_npp_ANN, "_INIT_MEAN"),
filn_npp_final = paste0(filn_npp_ANN, "_FINAL_MEAN")
)
source("Processed_data/collect_gdf_bymodl.R")
source("Processed_data/read_nc_onefile.R")
source("Processed_data/nc_to_df.R")
gdf <- purrr::map(
as.list(seq(nrow(df))),
~collect_gdf_bymodl(
df$modl[.],
df$dir[.],
df$filn_cSoil_init[.],
df$filn_cSoil_final[.],
df$filn_cVeg_init[.],
df$filn_cVeg_final[.],
df$filn_cLeaf_init[.],
df$filn_cLeaf_final[.],
df$filn_cRoot_init[.],
df$filn_cRoot_final[.],
df$filn_cWood_init[.],
df$filn_cWood_final[.],
df$filn_npp_init[.],
df$filn_npp_final[.],
df$filn_cSoil_change[.],
df$filn_cVeg_change[.]
)) %>%
bind_rows() %>%
## get aboveground biomass as sum of cWood and cLeaf
mutate(cveg_ag_init = cleaf_init + cwood_init,
cveg_ag_final = cleaf_final + cwood_final
) %>%
group_by(modl) %>%
nest()
gdf <- purrr::map(
as.list(seq(nrow(df))),
~collect_gdf_bymodl(
df$modl[.],
df$dir[.],
df$filn_cSoil_init[.],
df$filn_cSoil_final[.],
df$filn_cVeg_init[.],
df$filn_cVeg_final[.],
df$filn_cLeaf_init[.],
df$filn_cLeaf_final[.],
df$filn_cRoot_init[.],
df$filn_cRoot_final[.],
df$filn_cWood_init[.],
df$filn_cWood_final[.],
df$filn_npp_init[.],
df$filn_npp_final[.],
df$filn_cSoil_change[.],
df$filn_cVeg_change[.]
)) %>%
bind_rows() %>%
## get aboveground biomass as sum of cWood and cLeaf
mutate(cveg_ag_init = cleaf_init + cwood_init,
cveg_ag_final = cleaf_final + cwood_final
) %>%
group_by(modl) %>%
nest()
gdf <- purrr::map(
as.list(seq(nrow(df))),
~collect_gdf_bymodl(
df$modl[.],
df$dir[.],
df$filn_cSoil_init[.],
df$filn_cSoil_final[.],
df$filn_cVeg_init[.],
df$filn_cVeg_final[.],
df$filn_cLeaf_init[.],
df$filn_cLeaf_final[.],
df$filn_cRoot_init[.],
df$filn_cRoot_final[.],
df$filn_cWood_init[.],
df$filn_cWood_final[.],
df$filn_npp_init[.],
df$filn_npp_final[.],
df$filn_cSoil_change[.],
df$filn_cVeg_change[.]
)) %>%
bind_rows() %>%
## get aboveground biomass as sum of cWood and cLeaf
mutate(cveg_ag_init = cleaf_init + cwood_init,
cveg_ag_final = cleaf_final + cwood_final
) %>%
group_by(modl) %>%
nest()
source("Processed_data/collect_gdf_bymodl.R")
source("Processed_data/read_nc_onefile.R")
source("Processed_data/nc_to_df.R")
gdf <- purrr::map(
as.list(seq(nrow(df))),
~collect_gdf_bymodl(
df$modl[.],
df$dir[.],
df$filn_cSoil_init[.],
df$filn_cSoil_final[.],
df$filn_cVeg_init[.],
df$filn_cVeg_final[.],
df$filn_cLeaf_init[.],
df$filn_cLeaf_final[.],
df$filn_cRoot_init[.],
df$filn_cRoot_final[.],
df$filn_cWood_init[.],
df$filn_cWood_final[.],
df$filn_npp_init[.],
df$filn_npp_final[.],
df$filn_cSoil_change[.],
df$filn_cVeg_change[.]
)) %>%
bind_rows() %>%
## get aboveground biomass as sum of cWood and cLeaf
mutate(cveg_ag_init = cleaf_init + cwood_init,
cveg_ag_final = cleaf_final + cwood_final
) %>%
group_by(modl) %>%
nest()
gdf <- purrr::map(
as.list(seq(nrow(df))),
~collect_gdf_bymodl(
df$modl[.],
df$dir[.],
df$filn_cSoil_init[.],
df$filn_cSoil_final[.],
df$filn_cVeg_init[.],
df$filn_cVeg_final[.],
df$filn_cLeaf_init[.],
df$filn_cLeaf_final[.],
df$filn_cRoot_init[.],
df$filn_cRoot_final[.],
df$filn_cWood_init[.],
df$filn_cWood_final[.],
df$filn_npp_init[.],
df$filn_npp_final[.],
df$filn_cSoil_change[.],
)) %>%
bind_rows() %>%
## get aboveground biomass as sum of cWood and cLeaf
mutate(cveg_ag_init = cleaf_init + cwood_init,
cveg_ag_final = cleaf_final + cwood_final
) %>%
group_by(modl) %>%
nest()
gdf <- purrr::map(
as.list(seq(nrow(df))),
~collect_gdf_bymodl(
df$modl[.],
df$dir[.],
df$filn_cSoil_init[.],
df$filn_cSoil_final[.],
df$filn_cVeg_init[.],
df$filn_cVeg_final[.],
df$filn_cLeaf_init[.],
df$filn_cLeaf_final[.],
df$filn_cRoot_init[.],
df$filn_cRoot_final[.],
df$filn_cWood_init[.],
df$filn_cWood_final[.],
df$filn_npp_init[.],
df$filn_npp_final[.],
df$filn_cSoil_change[.],
)) %>%
bind_rows() %>%
## get aboveground biomass as sum of cWood and cLeaf
mutate(cveg_ag_init = cleaf_init + cwood_init,
cveg_ag_final = cleaf_final + cwood_final
) %>%
group_by(modl) %>%
nest()
gdf <- purrr::map(
as.list(seq(nrow(df))),
~collect_gdf_bymodl(
df$modl[.],
df$dir[.],
df$filn_cSoil_init[.],
df$filn_cSoil_final[.],
df$filn_cVeg_init[.],
df$filn_cVeg_final[.],
df$filn_cLeaf_init[.],
df$filn_cLeaf_final[.],
df$filn_cRoot_init[.],
df$filn_cRoot_final[.],
df$filn_cWood_init[.],
df$filn_cWood_final[.],
df$filn_npp_init[.],
df$filn_npp_final[.],
df$filn_cSoil_change[.]
)
)
# availvars <- read_csv( "./availvars_trendy_v8_S1.csv" )
# filnams <- read_csv( "filnams_trendy_v8_S1.csv" ) %>%
filnams <- read_csv( "filnams_trendy_v7_S1.csv" ) %>%
setNames(c("modl", paste0("filn_", names(.)[-1])))
modls <- filnams %>%
filter(!is.na(filn_cSoil) & !is.na(filn_cVeg) & !is.na(filn_npp)) %>%
## for separate aboveground biomass
filter(!is.na(filn_cWood) & !is.na(filn_cLeaf)) %>%
## remove models from analysis. See above for reasons for exclusion
filter(!(modl %in% c("LPJ", "DLEM", "LPX-Bern", "VISIT"))) %>%
filter(modl != "SDGVM") %>%
pull(modl)
df <- filnams %>%
## filter based on above
filter(modl %in% modls) %>%
# mutate(dir = paste0("/cluster/home/bestocke/data/trendy/v8/")) %>%
# mutate(dir = paste0("~/data/trendy/v8/")) %>%
mutate(dir = paste0("Processed_data")) %>%
mutate_at(vars(starts_with("filn")), ~str_replace(., ".nc", "")) %>%
## get starting year
left_join(read_csv("./startyear_trendy_v7_S1.csv"), by = "modl") %>%
rename(startyear_init = startyear, startyear_npp_init = startyear_npp) %>%
mutate(endyear_init = startyear_init + 9, endyear_npp_init = startyear_npp_init + 9) %>%
## create CDO command to convert flux (per seconds) to annual total (per year)
mutate(cmd_npp_units = paste("./get_tot_ann.sh", filn_npp, dir)) %>%
## create CDO command to take mean across years at simulation start and end
mutate(cmd_cVeg  = paste("./proc_trendy_soc_biomass.sh", filn_cVeg,  dir, startyear_init, endyear_init),
cmd_cSoil = paste("./proc_trendy_soc_biomass.sh", filn_cSoil, dir, startyear_init, endyear_init),
cmd_npp   = paste("./proc_trendy_soc_biomass.sh", filn_npp_ANN ,  dir, startyear_npp_init, endyear_npp_init),
cmd_cLeaf = paste("./proc_trendy_soc_biomass.sh", filn_cLeaf, dir, startyear_init, endyear_init),
cmd_cWood = paste("./proc_trendy_soc_biomass.sh", filn_cWood, dir, startyear_init, endyear_init),
cmd_cRoot = paste("./proc_trendy_soc_biomass.sh", filn_cRoot, dir, startyear_init, endyear_init),
cmd_dcSoil = paste("./proc_trendy_dsoc.sh", filn_cSoil, dir),
cmd_dcVeg  = paste("./proc_trendy_dsoc.sh", filn_cVeg,  dir),
cmd_dcLeaf  = paste("./proc_trendy_dsoc.sh", filn_cLeaf,  dir),
cmd_dcWood  = paste("./proc_trendy_dsoc.sh", filn_cWood,  dir)
) %>%
rowwise() %>%
mutate(filn_cVeg_init  = paste0(filn_cVeg, "_INIT_MEAN"),
filn_cVeg_final = paste0(filn_cVeg, "_FINAL_MEAN"),
filn_cLeaf_init  = paste0(filn_cLeaf, "_INIT_MEAN"),
filn_cLeaf_final = paste0(filn_cLeaf, "_FINAL_MEAN"),
filn_cRoot_init  = paste0(filn_cRoot, "_INIT_MEAN"),
filn_cRoot_final = paste0(filn_cRoot, "_FINAL_MEAN"),
filn_cWood_init  = paste0(filn_cWood, "_INIT_MEAN"),
filn_cWood_final = paste0(filn_cWood, "_FINAL_MEAN"),
filn_cSoil_init  = paste0(filn_cSoil, "_INIT_MEAN"),
filn_cSoil_final = paste0(filn_cSoil, "_FINAL_MEAN"),
filn_cSoil_change = paste0(filn_cSoil, "_CHANGE"),
filn_cVeg_change  = paste0(filn_cVeg, "_CHANGE"),
filn_cLeaf_change = paste0(filn_cLeaf, "_CHANGE"),
filn_cWood_change = paste0(filn_cWood, "_CHANGE"),
filn_npp_init  = paste0(filn_npp_ANN, "_INIT_MEAN"),
filn_npp_final = paste0(filn_npp_ANN, "_FINAL_MEAN")
)
source("Processed_data/collect_gdf_bymodl.R")
source("Processed_data/read_nc_onefile.R")
source("Processed_data/nc_to_df.R")
gdf <- purrr::map(
as.list(seq(nrow(df))),
~collect_gdf_bymodl(
df$modl[.],
df$dir[.],
df$filn_cSoil_init[.],
df$filn_cSoil_final[.],
df$filn_cVeg_init[.],
df$filn_cVeg_final[.],
df$filn_cLeaf_init[.],
df$filn_cLeaf_final[.],
df$filn_cRoot_init[.],
df$filn_cRoot_final[.],
df$filn_cWood_init[.],
df$filn_cWood_final[.],
df$filn_npp_init[.],
df$filn_npp_final[.],
df$filn_cSoil_change[.]
)
)
rlang::last_error()
gdf <- purrr::map(
as.list(seq(nrow(df))),
~collect_gdf_bymodl(
df$modl[.],
df$dir[.],
df$filn_cSoil_init[.],
df$filn_cSoil_final[.],
df$filn_cVeg_init[.],
df$filn_cVeg_final[.],
df$filn_cLeaf_init[.],
df$filn_cLeaf_final[.],
df$filn_cRoot_init[.],
df$filn_cRoot_final[.],
df$filn_cWood_init[.],
df$filn_cWood_final[.],
df$filn_npp_init[.],
df$filn_npp_final[.],
df$filn_cSoil_change[.],
)) %>%
bind_rows() %>%
## get aboveground biomass as sum of cWood and cLeaf
mutate(cveg_ag_init = cleaf_init + cwood_init,
cveg_ag_final = cleaf_final + cwood_final
) %>%
group_by(modl) %>%
nest()
gdf <- purrr::map(
as.list(seq(nrow(df))),
~collect_gdf_bymodl(
df$modl[.],
df$dir[.],
df$filn_cSoil_init[.],
df$filn_cSoil_final[.],
df$filn_cVeg_init[.],
df$filn_cVeg_final[.],
df$filn_cLeaf_init[.],
df$filn_cLeaf_final[.],
df$filn_cRoot_init[.],
df$filn_cRoot_final[.],
df$filn_cWood_init[.],
df$filn_cWood_final[.],
df$filn_npp_init[.],
df$filn_npp_final[.],
df$filn_cSoil_change[.],
)) %>%
bind_rows() %>%
## get aboveground biomass as sum of cWood and cLeaf
mutate(cveg_ag_init = cleaf_init + cwood_init,
cveg_ag_final = cleaf_final + cwood_final
) %>%
group_by(modl) %>%
nest()
df <- filnams %>%
## filter based on above
filter(modl %in% modls) %>%
# mutate(dir = paste0("/cluster/home/bestocke/data/trendy/v8/")) %>%
# mutate(dir = paste0("~/data/trendy/v8/")) %>%
mutate(dir = paste0("Processed_data")) %>%
mutate_at(vars(starts_with("filn")), ~str_replace(., ".nc", "")) %>%
## get starting year
left_join(read_csv("./startyear_trendy_v7_S1.csv"), by = "modl") %>%
rename(startyear_init = startyear, startyear_npp_init = startyear_npp) %>%
mutate(endyear_init = startyear_init + 9, endyear_npp_init = startyear_npp_init + 9) %>%
## create CDO command to convert flux (per seconds) to annual total (per year)
mutate(cmd_npp_units = paste("./get_tot_ann.sh", filn_npp, dir)) %>%
## create CDO command to take mean across years at simulation start and end
mutate(cmd_cVeg  = paste("./proc_trendy_soc_biomass.sh", filn_cVeg,  dir, startyear_init, endyear_init),
cmd_cSoil = paste("./proc_trendy_soc_biomass.sh", filn_cSoil, dir, startyear_init, endyear_init),
cmd_npp   = paste("./proc_trendy_soc_biomass.sh", filn_npp_ANN ,  dir, startyear_npp_init, endyear_npp_init),
cmd_cLeaf = paste("./proc_trendy_soc_biomass.sh", filn_cLeaf, dir, startyear_init, endyear_init),
cmd_cWood = paste("./proc_trendy_soc_biomass.sh", filn_cWood, dir, startyear_init, endyear_init),
cmd_cRoot = paste("./proc_trendy_soc_biomass.sh", filn_cRoot, dir, startyear_init, endyear_init),
cmd_dcSoil = paste("./proc_trendy_dsoc.sh", filn_cSoil, dir),
cmd_dcVeg  = paste("./proc_trendy_dsoc.sh", filn_cVeg,  dir),
cmd_dcLeaf  = paste("./proc_trendy_dsoc.sh", filn_cLeaf,  dir),
cmd_dcWood  = paste("./proc_trendy_dsoc.sh", filn_cWood,  dir)
) %>%
rowwise() %>%
mutate(filn_cVeg_init  = paste0(filn_cVeg, "_INIT_MEAN"),
filn_cVeg_final = paste0(filn_cVeg, "_FINAL_MEAN"),
filn_cLeaf_init  = paste0(filn_cLeaf, "_INIT_MEAN"),
filn_cLeaf_final = paste0(filn_cLeaf, "_FINAL_MEAN"),
filn_cRoot_init  = paste0(filn_cRoot, "_INIT_MEAN"),
filn_cRoot_final = paste0(filn_cRoot, "_FINAL_MEAN"),
filn_cWood_init  = paste0(filn_cWood, "_INIT_MEAN"),
filn_cWood_final = paste0(filn_cWood, "_FINAL_MEAN"),
filn_cSoil_init  = paste0(filn_cSoil, "_INIT_MEAN"),
filn_cSoil_final = paste0(filn_cSoil, "_FINAL_MEAN"),
filn_cSoil_change = paste0(filn_cSoil, "_CHANGE"),
filn_cVeg_change  = paste0(filn_cVeg, "_CHANGE"),
filn_cLeaf_change = paste0(filn_cLeaf, "_CHANGE"),
filn_cWood_change = paste0(filn_cWood, "_CHANGE"),
filn_npp_init  = paste0(filn_npp_ANN, "_INIT_MEAN"),
filn_npp_final = paste0(filn_npp_ANN, "_FINAL_MEAN")
)
gdf <- purrr::map(
as.list(seq(nrow(df))),
~collect_gdf_bymodl(
df$modl[.],
df$dir[.],
df$filn_cSoil_init[.],
df$filn_cSoil_final[.],
df$filn_cVeg_init[.],
df$filn_cVeg_final[.],
df$filn_cLeaf_init[.],
df$filn_cLeaf_final[.],
df$filn_cRoot_init[.],
df$filn_cRoot_final[.],
df$filn_cWood_init[.],
df$filn_cWood_final[.],
df$filn_npp_init[.],
df$filn_npp_final[.],
df$filn_cSoil_change[.],
)) %>%
bind_rows() %>%
## get aboveground biomass as sum of cWood and cLeaf
mutate(cveg_ag_init = cleaf_init + cwood_init,
cveg_ag_final = cleaf_final + cwood_final
) %>%
group_by(modl) %>%
nest()
gdf <- purrr::map(
as.list(seq(nrow(df))),
~collect_gdf_bymodl(
df$modl[.],
df$dir[.],
df$filn_cSoil_init[.],
df$filn_cSoil_final[.],
df$filn_cVeg_init[.],
df$filn_cVeg_final[.],
df$filn_cLeaf_init[.],
df$filn_cLeaf_final[.],
df$filn_cRoot_init[.],
df$filn_cRoot_final[.],
df$filn_cWood_init[.],
df$filn_cWood_final[.],
df$filn_npp_init[.],
df$filn_npp_final[.],
df$filn_cSoil_change[.]
)
)
gdf <- purrr::map(
as.list(seq(nrow(df))),
~collect_gdf_bymodl(
df$modl[.],
df$dir[.],
df$filn_cSoil_init[.],
df$filn_cSoil_final[.],
df$filn_cVeg_init[.],
df$filn_cVeg_final[.],
df$filn_cLeaf_init[.],
df$filn_cLeaf_final[.],
df$filn_cRoot_init[.],
df$filn_cRoot_final[.],
df$filn_cWood_init[.],
df$filn_cWood_final[.],
df$filn_npp_init[.],
df$filn_npp_final[.],
df$filn_cSoil_change[.],
)) %>%
bind_rows() %>%
## get aboveground biomass as sum of cWood and cLeaf
mutate(cveg_ag_init = cleaf_init + cwood_init,
cveg_ag_final = cleaf_final + cwood_final
) %>%
group_by(modl) %>%
nest()
View(df)
setwd("F:/Side_project/Beni/dgvm_analyses/trendy_v7")
